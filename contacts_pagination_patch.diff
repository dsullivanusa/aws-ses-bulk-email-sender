--- bulk_email_api_lambda.py.original	2024-01-01 00:00:00.000000000 +0000
+++ bulk_email_api_lambda.py.fixed	2024-01-01 00:00:00.000000000 +0000
@@ -1934,11 +1934,20 @@
         }}
         
         async function changePageSize() {{
-            const newPageSize = parseInt(document.getElementById('pageSize').value);
-            paginationState.pageSize = newPageSize;
-            
-            // Reset to first page with new page size
-            await loadContacts(true);
+            try {{
+                const pageSizeSelect = document.getElementById('pageSize');
+                if (!pageSizeSelect) {{
+                    console.error('Page size select not found');
+                    return;
+                }}
+                
+                const newPageSize = parseInt(pageSizeSelect.value);
+                console.log('Changing page size to:', newPageSize);
+                
+                // Disable dropdown during loading to prevent multiple clicks
+                pageSizeSelect.disabled = true;
+                
+                // Reset pagination state completely
+                paginationState = {{
+                    currentPage: 1,
+                    pageSize: newPageSize,
+                    paginationKeys: [null],
+                    hasNextPage: false,
+                    displayedContacts: []
+                }};
+                
+                // Reload contacts with new page size
+                await loadContacts(false);
+                
+                // Re-enable dropdown after loading
+                pageSizeSelect.disabled = false;
+                
+            }} catch (error) {{
+                console.error('Error changing page size:', error);
+                // Re-enable dropdown on error
+                const pageSizeSelect = document.getElementById('pageSize');
+                if (pageSizeSelect) {{
+                    pageSizeSelect.disabled = false;
+                }}
+            }}
         }}
         
         async function loadAllContacts() {{
